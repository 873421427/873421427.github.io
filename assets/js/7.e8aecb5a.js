(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{194:function(e,a,r){"use strict";r.r(a);var t=r(0),s=Object(t.a)({},function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"golang-docker部署实践"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#golang-docker部署实践","aria-hidden":"true"}},[e._v("#")]),e._v(" Golang Docker部署实践")]),e._v(" "),r("h2",{attrs:{id:"此教程面向docker新手"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#此教程面向docker新手","aria-hidden":"true"}},[e._v("#")]),e._v(" 此教程面向Docker新手")]),e._v(" "),r("p",[e._v("容器技术为服务的可扩展和部署提供了很大便利。\n比如使用nginx就可以根据流量的大小帮你自动的增加或者减少容器\n对于部署来说，您不必再对每一种语言配置您的环境变量，只要pull 下来docker，即可运行，容器中本身已经有了别人配置好的环境变量")]),e._v(" "),r("p",[e._v("下面就以我们项目中用到的golang语言为例制作一个自己go语言项目的镜像，让你的前端小伙伴不用自己配置go语言环境，只要有docker就可以了")]),e._v(" "),r("p",[e._v("关于下载docker的方法请自行搜索")]),e._v(" "),r("h2",{attrs:{id:"编写dockerfile"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#编写dockerfile","aria-hidden":"true"}},[e._v("#")]),e._v(" 编写Dockerfile")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("首先要明确的一个概念是一个空的docker容器就是一个linux系统，你想要在这个系统里面配置自己的环境，就和你在电脑上操作是一样的，都是通过敲入命令行，下载相应的软件，运行环境， 更改各种配置等等。 那么我们怎么做到这些呢，答案就是Dockerfle。 Dockerfile就是一个配置文件，名字就叫Docerfile， 要注意Dokerfile的位置，这和你进行拷贝等文件操作时的路径有关。 我的项目Dockerfile就放在项目的根目录下面")])]),e._v(" "),r("li",[r("p",[e._v("我们自己的Dockerfile如下")])])]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("FROM golang:latest  #表示拉取golang的基础镜像，也就是有golang环境的linux系统\n\n\nWORKDIR $GOPATH/src/github.com/earnsparemoney/backend #设置你的工作目录\n\nCOPY . . #将当前目录下的所有文件拷贝进你的镜像中，就是你在本机上的文件\nRUN go get -d -v ./...  #获取项目的所有依赖，这个命令会自动查找你的项目依赖\nRUN go install -v ./... #安装依赖\n\n\nEXPOSE 443 #暴露容器端口443\n\n\nCMD go run main.go #运行程序\n")])])]),r("h2",{attrs:{id:"生成镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#生成镜像","aria-hidden":"true"}},[e._v("#")]),e._v(" 生成镜像")]),e._v(" "),r("p",[e._v("这里需要特别说明的是，由于go会用到golang的包，而golang被墙了，我试了很多方法，都没有成功下载到golang的包，最后我在美国的服务器上才成功构建了镜像，如果你有更好的方法，欢迎告诉我。873421427@qq.com")]),e._v(" "),r("p",[e._v("在你的Dockerfile目录下面，运行如下命令")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("docker build -t godocker .  \n")])])]),r("p",[e._v("表示构建镜像 -t tag的缩写，表示给镜像个名字")]),e._v(" "),r("h2",{attrs:{id:"上传镜像到dockerhub"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#上传镜像到dockerhub","aria-hidden":"true"}},[e._v("#")]),e._v(" 上传镜像到Dockerhub")]),e._v(" "),r("p",[e._v("如何把你的镜像分享给别人呢，正如可以在github上分享代码一样，也有dockhub帮助你分享你的镜像，在上面我们已经成功的构建了镜像，接下来就是要上传自己的镜像")]),e._v(" "),r("ol",[r("li",[e._v("首先在dockerhub上注册一个自己的账号")]),e._v(" "),r("li",[e._v("在网站上创建一个仓库存放你的镜像， 取名为godocker，你可以自己取名字")]),e._v(" "),r("li",[e._v("登陆，在本机的终端里面，输入命令")])]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("docker login\n")])])]),r("ol",{attrs:{start:"4"}},[r("li",[e._v("将之前制作好的镜像改一下tag，符合docker hub的上传格式")])]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("docker tag godocker zzt/godocker:version1.0\n")])])]),r("p",[e._v("zzt 是我的docker hub账户名， 后面的odocker指的是docker hub的仓库的名字， 前面的指的是刚才构建的image的名字，不要搞混, version1.0 指的是这个镜像的版本号,你可以自己起名字\n5. 上传image")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("docker push zzt/godocker\n")])])]),r("h2",{attrs:{id:"从dockerhub下载镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#从dockerhub下载镜像","aria-hidden":"true"}},[e._v("#")]),e._v(" 从DockerHub下载镜像")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("docker pull zzt/godocker:version1.0\n")])])]),r("h2",{attrs:{id:"运行镜像"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#运行镜像","aria-hidden":"true"}},[e._v("#")]),e._v(" 运行镜像")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("docker run -d -p 443:443 zzt/godocker:version1.0\n")])])]),r("p",[e._v("-d 指的是后台运行， -p指的是暴露本机的443端口， 对应container的443端口")]),e._v(" "),r("p",[e._v("大功告成！！！！ 我透")])])},[],!1,null,null,null);a.default=s.exports}}]);